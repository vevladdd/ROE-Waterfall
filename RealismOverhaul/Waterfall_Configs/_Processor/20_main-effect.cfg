@PART[*]:HAS[@ROWaterfall]:FOR[zROWaterfall_20_MainEffect]
{
    MODULE
    {
        __ro_waterfall_main = true
        name = ModuleWaterfallFX
        moduleID = #$/name$
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
            engineID = #$/ROWaterfall/engineID$
        }
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = 0,1
        }
        TEMPLATE
        {
            __ro_waterfall_main = true
            templateName = #$/ROWaterfall/template$
            overrideParentTransform = #$/ROWaterfall/transform$
            position = #$/ROWaterfall/position$
            rotation = #$/ROWaterfall/rotation$
            scale = #$/ROWaterfall/scale$
        }
    }
}

@PART[*]:HAS[@ROWaterfall:HAS[#template[waterfall-ntr-lh2-1]]]:FOR[zROWaterfall_20_MainEffect]
{
    @MODULE[ModuleWaterfallFX]:HAS[#__ro_waterfall_main]
    {
        !CONTROLLER[random] {}
    }
}

@PART[*]:HAS[@ROWaterfall:HAS[#template[waterfall-hydrolox-rs25-1]]]:FOR[zROWaterfall_20_MainEffect]
{
    @MODULE[ModuleWaterfallFX]:HAS[#__ro_waterfall_main]
    {
        !CONTROLLER[random] {}
        CONTROLLER
        {
            name = randomshock1
            linkedTo = random
            noiseType = perlin
            scale = 1
            speed = 5
            seed = 1
        }
        CONTROLLER
        {
            name = randomshock2
            linkedTo = random
            noiseType = perlin
            scale = 1
            speed = 8
            seed = 10
        }
        CONTROLLER
        {
            name = randomshock3
            linkedTo = random
            noiseType = perlin
            scale = 1
            speed = 5
            seed = 100
        }
        CONTROLLER
        {
            name = randomshock4
            linkedTo = random
            noiseType = perlin
            scale = 1
            speed = 8
            seed = 1000
        }
    }
}

@PART[*]:HAS[@ROWaterfall:HAS[#template[waterfall-rcs-jet-1]]]:FOR[zROWaterfall_20_MainEffect]
{
    @MODULE[ModuleWaterfallFX]:HAS[#__ro_waterfall_main]
    {
        !CONTROLLER,* {}
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = rcs
            linkedTo = rcs
        }
    }
}
