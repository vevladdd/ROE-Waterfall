@PART[*]:HAS[@ROWaterfall:HAS[@ExtraTemplate:HAS[~processed]]]:FOR[zzzROWaterfall_50_ExtraTemplates]
{
    &__extra_templates_counter = 0

    @MODULE[ModuleWaterfallFX]:HAS[#__ro_waterfall_main]
    {
        +TEMPLATE:HAS[#__ro_waterfall_main]
        {
            !__ro_waterfall_main = delete
            __ro_waterfall_extra_template = #$/__extra_templates_counter$

            @templateName = #$/ROWaterfall/ExtraTemplate:HAS[~processed]/template$
            @overrideParentTransform = #$/ROWaterfall/ExtraTemplate:HAS[~processed]/transform$
            @position = #$/ROWaterfall/ExtraTemplate:HAS[~processed]/position$
            @rotation = #$/ROWaterfall/ExtraTemplate:HAS[~processed]/rotation$
            @scale = #$/ROWaterfall/ExtraTemplate:HAS[~processed]/scale$
        }
    }

    @ROWaterfall
    {
        @ExtraTemplate:HAS[~processed]
        {
            processed = true
        }
    }

    @__extra_templates_counter += 1
    MM_PATCH_LOOP {}
}
